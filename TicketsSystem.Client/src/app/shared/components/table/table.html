<div class="bg-brand-surface rounded-xl border border-brand-border overflow-hidden">
    <!-- Header -->
    <div class="flex justify-between items-center px-6 py-4">
        <h2 class="text-xl font-bold">{{ title }}</h2>
        <div class="flex gap-2">
            @if (showFilter) {
            <app-button label="Filter" variant="outline" (onClick)="onFilter()"></app-button>
            }
            @if (showExport) {
            <app-button label="Export" variant="outline" (onClick)="onExport()"></app-button>
            }
        </div>
    </div>

    <!-- Table -->
    <div class="overflow-x-auto">
        <table class="w-full">
            <thead>
                <tr class="border-y border-brand-border">
                    @for (column of columns; track column.key) {
                    <th class="px-6 py-3 text-left text-xs font-semibold text-brand-text-muted uppercase tracking-wider"
                        [style.width]="column.width || 'auto'">
                        {{ column.header }}
                    </th>
                    }
                </tr>
            </thead>
            <tbody>
                @for (row of data; track $index) {
                <tr class="border-b border-brand-border hover:bg-brand-bg/50 cursor-pointer transition-colors"
                    (click)="onRowClick(row)">
                    @for (column of columns; track column.key) {
                    <td class="px-6 py-4">
                        @if (cellTemplate) {
                        <ng-container
                            *ngTemplateOutlet="cellTemplate; context: { $implicit: row, column: column }"></ng-container>
                        } @else {
                        {{ getCellValue(row, column.key) }}
                        }
                    </td>
                    }
                </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Footer / Pagination -->
    @if (pagination) {
    <div class="flex justify-between items-center px-6 py-4 border-t border-brand-border">
        <span class="text-sm text-brand-text-muted">
            Showing {{ showingFrom }} to {{ showingTo }} of {{ pagination.totalItems }} incidents
        </span>
        <div class="flex items-center gap-1">
            <button
                class="w-8 h-8 flex items-center justify-center rounded text-brand-text-muted hover:bg-brand-bg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                [disabled]="pagination.currentPage === 1" (click)="onPageChange(pagination.currentPage - 1)">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
                </svg>
            </button>
            @for (page of pageNumbers; track page) {
            <button class="w-8 h-8 flex items-center justify-center rounded text-sm font-medium transition-colors"
                [class]="page === pagination.currentPage 
                            ? 'bg-brand-primary text-white' 
                            : 'text-brand-text-muted hover:bg-brand-bg'" (click)="onPageChange(page)">
                {{ page }}
            </button>
            }
            <button
                class="w-8 h-8 flex items-center justify-center rounded text-brand-text-muted hover:bg-brand-bg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                [disabled]="pagination.currentPage === totalPages" (click)="onPageChange(pagination.currentPage + 1)">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                </svg>
            </button>
        </div>
    </div>
    }
</div>